@import "tailwindcss";

@theme inline {
  --color-primary: #E79C18;
  --color-primary-light: rgba(231, 156, 24, 0.15);
  --color-clean: #22c55e;
  --color-clean-light: rgba(34, 197, 94, 0.15);
  --color-flagged: #ef4444;
  --color-flagged-light: rgba(239, 68, 68, 0.15);
  --color-caution: #f59e0b;
  --color-caution-light: rgba(245, 158, 11, 0.15);
  --color-background: #000000;
  --color-foreground: #f5f5f7;
  --color-muted: #8e8e93;
  --color-border: rgba(84, 84, 88, 0.65);
  --color-surface: rgba(44, 44, 46, 0.65);
  --color-glass: rgba(44, 44, 46, 0.45);
  --color-glass-border: rgba(255, 255, 255, 0.08);
  --color-glass-highlight: rgba(255, 255, 255, 0.06);
  --color-label-primary: #ffffff;
  --color-label-secondary: rgba(235, 235, 245, 0.6);
  --color-label-tertiary: rgba(235, 235, 245, 0.3);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

/* iOS safe areas */
html {
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left);
}

html.camera-active {
  padding: 0 !important;
  background: #000 !important;
}

html.camera-active main {
  padding-bottom: 0 !important;
}

html, body {
  height: 100%;
  height: 100dvh;
  overflow: hidden;
  position: fixed;
  width: 100%;
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

body {
  background: var(--color-background);
  color: var(--color-foreground);
  font-family: -apple-system, var(--font-sans), system-ui, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

::-webkit-scrollbar {
  display: none;
}

@supports (padding-top: env(safe-area-inset-top)) {
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* ─── Liquid Glass Material System ─── */

.glass {
  background: rgba(44, 44, 46, 0.45);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.2),
    0 8px 24px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

.glass-subtle {
  background: rgba(44, 44, 46, 0.35);
  backdrop-filter: blur(16px) saturate(160%);
  -webkit-backdrop-filter: blur(16px) saturate(160%);
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.15),
    0 4px 16px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.glass-prominent {
  background: rgba(44, 44, 46, 0.65);
  backdrop-filter: blur(40px) saturate(200%);
  -webkit-backdrop-filter: blur(40px) saturate(200%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow:
    0 2px 4px rgba(0, 0, 0, 0.25),
    0 12px 32px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.glass-tint-primary {
  background: rgba(231, 156, 24, 0.15);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(231, 156, 24, 0.25);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.15),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(231, 156, 24, 0.1);
}

.glass-tint-clean {
  background: rgba(34, 197, 94, 0.15);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(34, 197, 94, 0.25);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.15),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(34, 197, 94, 0.1);
}

.glass-tint-flagged {
  background: rgba(239, 68, 68, 0.15);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(239, 68, 68, 0.2);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.15),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(239, 68, 68, 0.08);
}

.glass-tint-caution {
  background: rgba(245, 158, 11, 0.15);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border: 1px solid rgba(245, 158, 11, 0.2);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.15),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(245, 158, 11, 0.08);
}

/* Interactive glass press effect */
.glass-interactive {
  transition: transform 0.18s cubic-bezier(0.2, 0, 0, 1),
              box-shadow 0.18s ease;
}

.glass-interactive:active {
  transform: scale(0.97);
  box-shadow:
    0 1px 2px rgba(0, 0, 0, 0.2),
    0 4px 12px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

@media (prefers-reduced-motion: reduce) {
  .glass-interactive {
    transition: none;
  }
  .glass-interactive:active {
    transform: none;
  }
}

/* Settings icon position — move up in PWA standalone mode */
@media (display-mode: standalone) {
  .settings-position {
    top: -1rem !important;
  }
}

/* Scanner viewfinder animation */
@keyframes scan-line {
  0%, 100% { top: 0; }
  50% { top: calc(100% - 2px); }
}

.scan-line-animate {
  animation: scan-line 2s ease-in-out infinite;
}

/* Single-flash detection pulse */
@keyframes detect-flash {
  0% { opacity: 0; }
  30% { opacity: 1; }
  100% { opacity: 0; }
}

.detect-flash {
  animation: detect-flash 0.6s ease-out forwards;
}

/* Content fade-in — used when loading states resolve */
@keyframes fadeIn {
  from { opacity: 0; filter: blur(4px); }
  to { opacity: 1; filter: blur(0px); }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

/* Staggered list items */
@keyframes slideUp {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-slideUp {
  animation: slideUp 0.35s cubic-bezier(0.32, 0.72, 0, 1) forwards;
}

/* Respect reduced motion globally */
@media (prefers-reduced-motion: reduce) {
  .scan-line-animate,
  .detect-flash {
    animation: none;
  }

  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
